# Module 2.3: Directives Deep Dive

**Objective:** By the end of this module, you will be able to:
- **Differentiate** between structural and attribute directives.
- **Use** built-in directives like `@if`, `@for`, `@switch`, `[ngClass]`, and `[ngStyle]` to manipulate the DOM.
- **Create** custom directives to encapsulate reusable DOM manipulation logic.

---

### What Are Directives?

In Angular, directives are classes that add new behavior to elements in the template or transform their structure. They are a fundamental tool for manipulating the DOM.

**Analogy:** If components are the "nouns" of your UI (the things), directives are the "adjectives" or "verbs" (they modify or instruct the nouns).

There are three main types of directives in Angular:

1.  **Component Directives:** Directives with a template. Every component is technically a directive.
2.  **Structural Directives:** Change the DOM layout by adding and removing DOM elements.
3.  **Attribute Directives:** Change the appearance or behavior of an element, component, or another directive.

--- 

### 1. Structural Directives

Structural directives shape or reshape the DOM's structure, typically by adding, removing, or iterating over elements.

#### a) The `@if` Directive

*   **What it does:** Conditionally adds or removes an element from the DOM based on a boolean expression.
*   **Use Case:** Showing or hiding elements.

**Note:** Removing an element from the DOM is more performant than hiding it with CSS (`display: none`), as the element and its children are completely removed from the browser's render tree.

**Example:**
```html
@if (isLoggedIn) {
  <p>Welcome back, user!</p>
} @else {
  <p>Please log in.</p>
}
```

#### b) The `@for` Directive

*   **What it does:** Renders a template for each item in an iterable collection.
*   **Use Case:** Displaying lists of data.

**Note:** Always use the `track` keyword with a unique identifier for performance. This helps Angular avoid re-rendering the entire list when the data changes.

**Example:**
```html
<ul>
  @for (user of users; track user.id) {
    <li>{{ user.name }}</li>
  } @empty {
    <p>No users to display.</p>
  }
</ul>
```

#### c) The `@switch` Directive

*   **What it does:** Conditionally displays one of several possible views based on the value of an expression.
*   **Use Case:** Displaying different content based on a status, role, or type.

**Note:** Use `@switch` when you have multiple, mutually exclusive conditions. Use `@if` for simple true/false conditions.

**Example:**
```html
@switch (notificationStatus) {
  @case ('loading') { <p>Loading...</p> }
  @case ('success') { <p>Success!</p> }
  @case ('error') { <p>Error!</p> }
}
```

--- 

### 2. Attribute Directives

Attribute directives modify the appearance or behavior of an existing element.

#### a) `[ngClass]`

*   **What it does:** Adds or removes CSS classes from an element based on conditions.
*   **Use Case:** Dynamically styling elements.

**Note:** `[ngClass]` is ideal for working with CSS frameworks like Bootstrap or Tailwind CSS.

**Example:**
```html
<div [ngClass]="{ 'error-message': isError, 'important': isImportant }">
  This is a message.
</div>
```

#### b) `[ngStyle]`

*   **What it does:** Adds or removes inline styles from an element based on conditions.
*   **Use Case:** Applying dynamic styles that are calculated in the component class.

**Note:** Prefer `[ngClass]` over `[ngStyle]` for better maintainability and separation of concerns.

**Example:**
```html
<p [ngStyle]="{ 'color': canSave ? 'green' : 'grey' }">
  Save status
</p>
```

--- 

### Best Practices and Summary

*   **Structural Directives** (`@if`, `@for`, `@switch`) modify the DOM layout.
*   **Attribute Directives** (`[ngClass]`, `[ngStyle]`) change the appearance or behavior of elements.
*   Use directives to improve accessibility by conditionally applying ARIA attributes.

---

**Previous:** [2.2 Data Binding Deep Dive](./2.2-data-binding-deep-dive.md)

**Next:** [2.4 View Encapsulation & Component Styles](./2.4-view-encapsulation.md)
